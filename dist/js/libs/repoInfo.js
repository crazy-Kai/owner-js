var fs=require("fs");module.exports=function(options){var repo=options.repo,branch=options.branch,result={},defaultGroup="platform",defaultName="test",defaultVersion="0.1.0";try{var pkg=JSON.parse(fs.readFileSync("package.json","utf-8"));defaultGroup=pkg.family,defaultName=pkg.name,defaultVersion=pkg.version,result.spm=pkg.spm}catch(e){}try{var head=fs.readFileSync(".git/HEAD","utf-8"),version=head.replace(/\s+$/g,"").split("/").pop();defaultVersion&&defaultVersion!=version&&process.exit()}catch(e){}var repoRet=/gitlab\.alibaba-inc\.com[\/\:]{1}(.*)\/(.*)\.git/g.exec(repo);result.group=repoRet?repoRet[1]:defaultGroup,result.name=repoRet?repoRet[2]:defaultName;var versionMatch=/(daily|publish)\/([\d\.]+)/g.exec(branch);return result.version=versionMatch?versionMatch[2]:defaultVersion,result.type=versionMatch?versionMatch[1]:void 0,result.isPublish=!!versionMatch&&"publish"===versionMatch[1],result};